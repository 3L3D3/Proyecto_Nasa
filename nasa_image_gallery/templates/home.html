{% extends 'header.html' %} {% load static %} {% block content %}
<main>
  <h1 class="text-center">Galería de Imágenes de la NASA</h1>
  <div class="d-flex justify-content-center" style="margin-bottom: 1%">
    <!-- Buscador del sitio -->
    <form class="d-flex" action="{% url 'buscar' %}" method="POST">
      {% csrf_token %}
      <input
        class="form-control me-2"
        type="search"
        name="query"
        placeholder="Escribí una palabra"
        aria-label="Search"
      />
      <button class="btn btn-outline-success" type="submit">Buscar</button>
    </form>
  </div>

  <div class="row row-cols-1 row-cols-md-3 g-4">
    {% for imagen in images %}
    <div class="col">
      <div class="card">
        <img src="{{ imagen.image_url }}" class="card-img-top" alt="imagen" />
        <div class="card-body">
          <h5 class="card-title">{{ imagen.title }}</h5>
          <p class="card-text">{{ imagen.description }}</p>
        </div>
        {% if request.user.is_authenticated %}
        <div class="card-footer text-center">
          <form method="post" action="{% url 'agregar-favorito' %}">
            {% csrf_token %}
            <input type="hidden" name="title" value="{{ imagen.title }}" />
            <input
              type="hidden"
              name="description"
              value="{{ imagen.description }}"
            />
            <input
              type="hidden"
              name="image_url"
              value="{{ imagen.image_url }}"
            />
            <input type="hidden" name="date" value="{{ imagen.date }}" />

            {% if imagen.estaEnTusFavoritos %}
            <button
              type="submit"
              class="btn btn-primary btn-sm float-left"
              style="color: white"
              disabled
            >
              ✔️ Ya está añadida a favoritos
            </button>
            {% else %}
            <button
              type="submit"
              class="btn btn-primary btn-sm float-left"
              style="color: white"
            >
              ❤️ Añadir a favoritos
            </button>
            {% endif %}
          </form>
        </div>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
</main>

<!-- Load spinner -->
<div id="load_spinner" class="spinner-container">
  <div class="star"></div>
</div>

<style>
  .spinner-container {
    display: none; /* Inicialmente oculto */
    position: fixed;
    z-index: 1000;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .star {
    width: 50px;
    height: 50px;
    background: linear-gradient(
      to bottom right,
      #f1c40f,
      #f39c12,
      #e74c3c,
      #9b59b6,
      #3498db,
      #1abc9c,
      #2ecc71,
      #27ae60,
      #16a085
    );
    clip-path: polygon(
      50% 0%,
      61% 35%,
      98% 35%,
      68% 57%,
      79% 91%,
      50% 70%,
      21% 91%,
      32% 57%,
      2% 35%,
      39% 35%
    );
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(0deg);
    animation: rotateStar 1s infinite linear;
  }

  @keyframes rotateStar {
    from {
      transform: translate(-50%, -50%) rotate(0deg);
    }
    to {
      transform: translate(-50%, -50%) rotate(360deg);
    }
  }
</style>

<script>
  // Mostrar el spinner al iniciar la carga de la página
  document.addEventListener("DOMContentLoaded", function () {
    var spinnerContainer = document.getElementById("load_spinner");
    spinnerContainer.style.display = "flex"; // Mostrar el spinner
  });

  // Ocultar el spinner cuando la página haya cargado completamente
  window.addEventListener("load", function () {
    var spinnerContainer = document.getElementById("load_spinner");
    spinnerContainer.style.display = "none";
  });
</script>

{% endblock %} /* Estilo para las cartas */ .card { background-color: #fff;
border-radius: 15px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); overflow: hidden;
transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
margin-bottom: 30px; } .card:hover { transform: translateY(-5px); box-shadow: 0
8px 16px rgba(0, 0, 0, 0.2); } .card img { width: 100%; height: 200px; /* Altura
fija para todas las imágenes */ object-fit: cover; border-top-left-radius: 15px;
border-top-right-radius: 15px; transition: transform 0.3s ease-in-out; }
.card:hover img { transform: scale(1.1); } .card .card-body { padding: 20px; }
.card .card-title { font-size: 1.5rem; font-weight: bold; margin-bottom: 10px;
color: #333; } .card .card-text { color: #666; line-height: 1.6; margin-bottom:
20px; } .card .btn { background-color: #03A9F4; color: #fff; border: none;
border-radius: 5px; padding: 10px 20px; transition: background-color 0.3s; }
.card .btn:hover { background-color: #0397d6; }
